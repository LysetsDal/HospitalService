syntax = "proto3";

package HospitalService;

option go_package = "HospitalService/proto";

// import "google/protobuf/empty.proto";

/*
protoc --go_out=. --go_opt=paths=source_relative --go-grpc_out=. \
--go-grpc_opt=paths=source_relative HospitalService/HospitalService.proto
*/

// PEER-2-PEER FOR CLIENTS 
service Client_ {
    rpc ping (ClientID) returns (Message) {} // Heartbeat
    rpc sendMsg (Message) returns (Message) {}
}

// HOSPITAL SERVER INTERFACE
service Hospital_ {
    rpc NewConnection (ClientID) returns (ClientResponse) {}
    rpc GetPeers (Message) returns (stream ClientID){}

}

message Message {
    int32 from = 1;
    string payload = 2;
}

message ClientID {
    int32 client_id = 1;
}

message ClientResponse {
    int32 client_id = 1;
}
